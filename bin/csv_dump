#!/usr/bin/env ruby

require "pathname"
require "time"
path = Pathname.new(__FILE__)
$LOAD_PATH.unshift File.expand_path "../../bundle", path.realpath
$LOAD_PATH.unshift File.expand_path "../../lib", path

require "bundler/setup"
require "wb"

def csv_output(users)
  users.each_pair do |user, vals|
    puts "#{user}, #{vals['created_at'].to_date}, #{vals['url']}"
  end
end

pr_users = WelcomeBot::Github.fetch_issues("pull_request")
issue_users = WelcomeBot::Github.fetch_issues("issue")

puts "\nIsssues:"
csv_output(issue_users)

puts "\nPull Requests:"
csv_output(pr_users)
